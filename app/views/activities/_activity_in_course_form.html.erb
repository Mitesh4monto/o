<%= semantic_form_for @activity.becomes(Activity), :url => url, :html => {:class => "course_manage"} do |f| %>
<% if @activity.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@activity.errors.count, "error") %> prohibited this activity from being saved:</h2>

    <ul>
    <% @activity.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

	<%= hidden_field_tag 'course_id', @course.id %>
	<div class="row">	
		<label>The title as it will appear in the plan</label><%= f.text_field :title %>
		<div class="clear"></div>	
	</div>

	<div class="row">	
		<label>Activity Customization information <%= tipper("If you would like followers of this activity to modify this, enter how here (e.g. 'This activity is part of the workout activities.  Only keep one.  Delete this if you've picked another. <BR> You can also have instructions in the description, but this will appear in the Plan view.") %></label><%= f.text_area :customization %>
		<div class="clear"></div>	
	</div>


	<div class="row">
		<label>Gaol for this activity <%= tipper("What are we trying to achieve by doing this activity?  <BR>This can be left blank.") %></label>
		<% if @course.strategy.goals.size > 0 %>
			<% select_goal = "Select a goal" %>	
			<%= f.input :goal,  :as => :select, :collection => @course.strategy.goals, :prompt => "Select a Goal" %>
			<label>Or create new</label>
		<% end %>
		 <%= f.text_field :new_goal_text %>
		<div class="clear"></div>
	</div>
	
	
	<div class="row">
		<label>Description<%= tipper(" Add all details relevant.  We recommend adding<br>other media to complement the text (external links, pictures, videos)") %></label>
		<div class="clear"></div>
    	<%= f.text_area :description, :class => 'ckeditor' %>
		<div class="clear"></div>
	</div>

<div class='box'>
	<div class="row">
		<label>Timing <%= tipper("Enter how people should tackle this activity.  Is it <BR>
		- a one time thing<BR>
		- an activity to do in reaction to something (e.g. when I feel hunger strike; when I'm irrate)<BR>
		- an activity to do repeatedly at a set frequency (e.g. 3 times per week)<BR>
		- an activity to be done whenever (user discretion)<BR>
		") %></label>
		<%=   f.input :kind_of_timing,  :as => :select,      :collection => ["Reactive", "One time", "Frequency", "Whenever" ], :default => "One time", :label => false %>
		<div class="clear"></div>
	</div>

	<div class="row">
		<div id='freak'>
		<%= f.text_field :freak_number %> times per <%= f.select :freak_interval, ["Day", "Week", "Month"] %>
		</div>
		<div class="clear"></div>
	</div>
	<div class="row">
		<div id='react'>
		<label>When the following occurs:</label><%= f.text_field :reactive_expression %>
		</div>
		<div class="clear"></div>
	</div>

	<div class="row">
		<label>Duration <%= tipper("If this activity should have a duration, i.e. 'Do it for 3 weeks.'  <BR>If this activity is ongoing or at the discretion of the user, set to 'no end date'") %></label>	
		<div class="clear"></div>
	</div>
	<div class="row">
		<%= f.radio_button :until_radio, "date" %>
		<%= label :until_radio, "Do it until" %>
			<div class="clear"></div>
		</div>
		<div class="row">
		<%= f.text_field :duration_number %> 
		<%= f.select :duration_unit, ["Days", "Weeks", "Months", "Years"] %> after start
		<div class="clear"></div>
	</div>
	<div class="row">
		<%= f.radio_button :until_radio, "nodate" %>	
		<%= label :until_radio, "No end date" %>
		<div class="clear"></div>
	</div>
		
</div>
		
	<div class="row">
		<label>Tag List<%= tipper("Comma separated tags for this activity (e.g. 'weight loss, exercise')") %></label><%= f.input  :tag_list, :label => false%>
		<div class="clear"></div>
	</div>
	
	<div class="row">
		<%= f.submit %>
		<%= submit_tag 'Cancel', :name => 'cancel' %>
		<div class="clear"></div>
	</div>

<% end %>
